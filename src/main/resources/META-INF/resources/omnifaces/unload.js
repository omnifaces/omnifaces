var OmniFaces=OmniFaces||{};
OmniFaces.Unload=function(n,e){function t(){for(var n=0;n<e.forms.length;n++){var t=e.forms[n][i];if(t)return t.value}return null}function a(n,e,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t)}function o(n,e){var t=n[e];t&&(n[e]=function(){c.disable(),t.apply(this,arguments)})}var i="javax.faces.ViewState",r=!1,c={};return c.init=function(s){if(n.XMLHttpRequest){var u=t();u&&(a(n,"beforeunload",function(){if(r)return void(r=!1);try{var e=new XMLHttpRequest;e.open("POST",n.location.href.split(/[?#;]/)[0],!1),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("omnifaces.event=unload&id="+s+"&"+i+"="+encodeURIComponent(u))}catch(t){}}),a(e,"submit",function(){c.disable()}),n.mojarra?o(mojarra,"jsfcljs"):n.myfaces&&o(myfaces.oam,"submitForm"))}},c.disable=function(){r=!0},c}(window,document);